project_name: techwhen

containers:
  build-env:
    build_directory: .
    volumes:
      - local: .
        container: /usr/src/app
        options: cached
    working_directory: /usr/src/app
    environment:
      - REACT_APP_CONFERENCES_ENDPOINT=$CONFERENCES_URL

tasks: 
  run:
    description: Runs the app
    run:
      container: build-env
      command: yarn start
      ports:
        - local: 3000
          container: 3000
  test:
    description: Runs the tests
    run:
      container: build-env
      command: yarn test
      environment:
        - REACT_APP_CONFERENCES_ENDPOINT=http://good.luck.with.this.com

  bash:
    description: Node Console
    run:
      container: build-env
      command: bash
  build:
    description: Builds the app
    run:
      container: build-env
      command: yarn build
